<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
	  xmlns:th="http://www.thymeleaf.org"
	  xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title th:text=#{bids.title}></title>
	<link rel="stylesheet" href="/css/global.css">
	<link rel="stylesheet" href="/css/comprar.css">
	<link rel="stylesheet" type="text/css" href="../slick/slick.css"/>
	<link rel="stylesheet" type="text/css" href="../slick/slick-theme.css"/>
</head>

<body>
	<div th:replace="fragments/topbarLinks"></div>
	<section class = "carro">
	<div class = "fotos">
		<ul class = "slider">
			<li>
			 	<img src="../imagens/${veiculo.id}/$1.jpg" alt="Carro" />
			</li>
		</ul>
	</div>
	<div class = "info">
		<ul class ="dadosCarro">
			<li class="nomeModelo" th:text = "${veiculo.modelo} + ' '+  ${veiculo.ano} + ' - ' + ${veiculo.quilometragem} + 'km'"></li>
			<li th:text = "${veiculo.loja.nome}"></li>
			<li th:text =  "#{vehicle.license} + ': ' + ${veiculo.placa} "></li>
			<li th:text = "#{vehicle.chassis} + ': ' + ${veiculo.chassi} " ></li>
			<li id = "preco" th:text = "'R$' + ${veiculo.preco}"></li>
		</ul>
	<div th:each ="proposta : ${propostas}">
		<div th:if="${proposta.estado == 'ABERTO' && proposta.veiculo.id == veiculo.id}">
			<div th:with="block_proposta=True"></div>
			<div th:with="proposta_aberta=${proposta}"></div>
		</div>
	</div>
	<div th:switch ="${block_proposta}">
		<form th:case = "null" id="form_proposta" action="../proposta/insereProposta?id_veiculo=${veiculo.id}&id_loja=${veiculo.loja.id}" method="post">
			<input id="pvalor" type="number" name="valor" th:placeholder="#{bids.value}"/>
	    	<input id="pparcelas" type="number" name="parcelamento" th:placeholder="#{bids.number.installments}"/>
			<input id="proposta" type="submit" name="Proposta" th:value="#{bids.make}"/>
		</form>
		<div align = "center" th:case = "*">
			<h1 class="label" th:text= #{customer.open.bid}/></h1>
				<table class="propostas">
					<thead>
						<tr>
	                    	<th th:text = #{bids.date}/></th>
							<th th:text = #{bids.value}/></th>
	                        <th th:text =#{customer.cancel.bid}/></th>
						</tr>
					</thead>
	                	<tbody>
	                    	<tr>
	                        <td th:text = ${proposta_aberta.data}></td>
	                        <td th:text = "'R$' + ${proposta_aberta.valor} + ' ' + ${proposta_aberta.parcelamento}"></td>
	                        <td id="botao_cancelar">
	                        	<a id="remover" href="../proposta/removerProposta?id=${pageScope.proposta_aberta.id}" th:text=#{bids.cancel}/></a>
	                         </td>
	                         </tr>
	                    </tbody>
				</table>
		</div>
	</div>
	<div class="descricao">
		<p th:text="#{vehicle.about} + ' ' + ${veiculo.descricao}"/>
	</div>
	</section>
	<script type="text/javascript" src="//code.jquery.com/jquery-1.11.0.min.js"></script>
	<script type="text/javascript" src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
	<script type="text/javascript" src="../slick/slick.min.js"></script>
	<script src="../js/carrossel.js"></script>
</body>

</html>